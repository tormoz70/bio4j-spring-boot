<?xml version="1.0" encoding="UTF-8"?>
<cursor xmlns="http://bio4j.ru/biodef-repo/store"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://bio4j.ru/biodef-repo/store http://bio4j.ru/biodef-repo/store/store-v11.xsd"
        dtoSkip="true">
    <SQL action="select">
        <text><![CDATA[{text-file:pus.sql}]]></text>
        <param name="filter" type="string"/>
        <param name="issued_from" type="date"/>
        <param name="issued_to" type="date"/>
        <param name="pu_num" type="string"/>
        <param name="rent_name" type="string"/>
        <param name="prod_year" type="string"/>
        <param name="madein" type="string"/>
        <param name="studia" type="string"/>
        <param name="genre" type="string"/>
        <param name="view_restr" type="string"/>
        <param name="distributors" type="string"/>
        <param name="film_category" type="string"/>
        <param name="rent_category" type="string"/>
        <param name="distribs" type="string"/>
        <param name="onlymanual" type="decimal"/>

        <param name="p_sys_curusr_org_uid" type="string"/>
        <param name="p_sys_curusr_roles" type="string"/>
    </SQL>

    <SQL action="execute">
        <text>@nsi_current.version@.put_prokat</text>

        <param name="puId" type="integer" direction="INOUT"/>
        <param name="filmId" type="integer" />
        <param name="puNum" type="string" />
        <param name="issued" type="date" />
        <param name="rentName" type="string" />
        <param name="rentCategory" type="string" />
        <param name="rentEnd" type="date" />
        <param name="rentDesc" type="string" />
        <param name="distributors" type="string" />
        <param name="destr_phone" type="string" />
        <param name="contrNum" type="string" />
        <param name="contrDate" type="date" />
        <param name="creDate" type="date" />
        <param name="deleted" type="boolean" />
        <param name="siteCheck" type="boolean" />
        <param name="packet_id" type="integer" />
    </SQL>

    <fields>
        <field name="pu_id" type="integer" pk="true" attrName="puId" hidden="false" header="ID ПУ" readOnly="true" mandatory="true" editMaxLength="18"/>
        <field name="film_id" type="integer" attrName="filmId" hidden="true"/>
        <field name="pu_num" type="string" attrName="puNum" readOnly="true" header="Номер ПУ" mandatory="true" editMaxLength="20"/>
        <field name="issued" type="date" readOnly="true" header="Начало ПУ" format="dd.MM.yyyy" mandatory="true" editMaxLength="10"/>
        <field name="film_category" type="string" attrName="filmCategory" readOnly="true" header="Категория" mandatory="true" editMaxLength="100"/>
        <field name="rent_category" type="string" attrName="rentCategory" readOnly="true" header="Категория проката" mandatory="true" editMaxLength="200"/>
        <field name="rent_end" type="date" attrName="rentEnd" readOnly="true" header="Окончание ПУ" format="dd.MM.yyyy" mandatory="true" editMaxLength="10"/>
        <field name="rent_desc" type="string" attrName="rentDesc" readOnly="true" header="Описание" mandatory="true" editMaxLength="4000"/>
        <field name="distributors" type="string" readOnly="true" header="Правообладатели" mandatory="true" editMaxLength="1000"/>
        <field name="owners" type="string" readOnly="true" header="Владельцы" mandatory="true" editMaxLength="1000"/>
        <field name="contr_num" type="string" attrName="contrNum" hidden="true"/>
        <field name="contr_date" type="date" attrName="contrDate" hidden="true"/>
        <field name="cre_date" type="date" attrName="creDate" readOnly="true" mandatory="true" header="Дата заполнения" editMaxLength="10"/>
        <field name="rent_name" type="string" attrName="rentName" readOnly="true" header="Название фильма" mandatory="true" editMaxLength="500"/>
        <field name="name_orig" type="string" attrName="nameOrig" readOnly="true" header="Название фильма (en)" mandatory="true" editMaxLength="500"/>
        <field name="madein_orig" type="string" attrName="madeinOrig" readOnly="true" header="Страна производства (en)" mandatory="true" editMaxLength="500"/>
        <field name="lang_orig" type="string" attrName="langOrig" readOnly="true" header="Язык оригинала" mandatory="true" editMaxLength="500"/>
        <field name="prod_year" type="string" attrName="prodYear" readOnly="true" header="Год выпуска" mandatory="true" editMaxLength="300"/>
        <field name="madein" type="string" readOnly="true" header="Страна производства" mandatory="true" editMaxLength="500"/>
        <field name="studia" type="string" readOnly="true" header="Студия" mandatory="true" editMaxLength="1000"/>
        <field name="genre" type="string" readOnly="true" header="Жанр" mandatory="true" editMaxLength="100"/>
        <field name="age_restr" type="integer" attrName="ageRestr" hidden="true"/>
        <field name="view_restr" type="string" attrName="viewRestr" header="Ограничения" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="mproducer" type="string" attrName="producer" header="Продюссеры" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="mscrwriters" type="string" attrName="scrwriters" header="Сценартсты" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="mdirector" type="string" attrName="director" header="Режисеры" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="mcomposer" type="string" attrName="composer" header="Сомпозиторы" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="moperator" type="string" attrName="operator" header="Операторы" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="martist" type="string" attrName="artist" header="Художники" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="pu_desc" type="string" attrName="puDesc" header="Описание ПУ" readOnly="true" mandatory="true" editMaxLength="1000"/>
        <field name="editable" type="boolean" hidden="true"/>
        <field name="pu_num_perm" type="string" attrName="puNumPerm" hidden="true"/>
        <field name="date_from_perm" type="date" attrName="dateFromPerm" hidden="true"/>
        <field name="date_to_perm" type="date" attrName="dateToPerm" hidden="true"/>
        <field name="startdate" type="date" header="Дата релиза" format="dd.MM.yyyy" readOnly="false" mandatory="false" editMaxLength="10"/>
        <field name="distribs" type="string" header="Дистрибьюторы" readOnly="true" mandatory="true" editMaxLength="4000"/>
        <field name="distrib_ids" type="string" attrName="distribIds" hidden="true" />
        <field name="site_check" type="boolean" attrName="siteCheck" header="Опубликован на сайте МКРФ"/>
        <field name="fduration" type="string" header="Продолжительность" readOnly="true" mandatory="true" editMaxLength="100"/>
        <field name="mduration" type="integer" header="Продолжительность (мин)" readOnly="true" mandatory="true" editMaxLength="10"/>
        <field name="sernum" type="integer" header="Кол-во серий" readOnly="true" mandatory="true" editMaxLength="10"/>
        <field name="pogu_id" type="integer" attrName="poguId" hidden="true"/>
        <field name="deleted" type="boolean" header="Удален" readOnly="true" mandatory="true"/>
        <field name="deleted_date" type="date" attrName="deletedDate" header="Дата удаления" readOnly="true" mandatory="true"/>
        <field name="notetxt" type="string" header="Примечания" readOnly="true" mandatory="true"/>
        <field name="prefrom" type="date" hidden="true"/>
        <field name="preto" type="date" hidden="true"/>
    </fields>
    <defaultSort>
        <field name="issued" direction="DESC"></field>
    </defaultSort>
</cursor>